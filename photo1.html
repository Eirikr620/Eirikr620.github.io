<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>나의 포트폴리오 & PHOTOS</title>
  <style>
    @font-face {
      font-family: 'VCR OSD Mono';
      src: url('VCR_OSD_MONO_1.001.ttf') format('truetype');
      font-weight: normal; font-style: normal;
    }
    :root{
      --cols: 3;
      --gap: 0px;               /* 썸네일 사이 간격(붙임 배치면 0) */
      --overlay-bg: rgba(0,0,0,.86);
      --close-bg: rgba(0,0,0,.6);
    }
    body{
      margin:0; font-family:'VCR OSD Mono', monospace;
      min-height:100vh; background:#f0f0f0; position:relative;
    }

    /* 드래그 가능한 메뉴 (그대로 유지) */
    .ztmy-menu-container{
      position:absolute; top:80px; left:30px; width:150px; padding:10px;
      background:#f0f0f0; border:2px solid #000; box-shadow:5px 5px 0 #000;
      cursor:grab; z-index:1000;
    }
    .menu-title{font-size:1.2em; font-weight:bold; padding-bottom:5px; border-bottom:2px solid #000; margin-bottom:10px;}
    .menu-list{list-style:none; margin:0; padding:0;}
    .menu-list li a{display:block; padding:5px 0; text-decoration:none; color:#000;}
    .menu-list li a:hover{background:#ccc;}

    .content{padding:20px; max-width:800px; margin:0 auto;}
    h1{margin:10px 0 14px;}

    /* === 갤러리: 3열, 셀 단위 렌더 === */
    .gallery{
      display:grid;
      grid-template-columns: repeat(var(--cols), 1fr);
      gap: var(--gap);
    }
    .cell{ position:relative; aspect-ratio:1/1; overflow:hidden; }
    .spacer{ visibility:hidden; pointer-events:none; }
    .item{ display:block; cursor:pointer; background:#e5e7eb; }
    .item img{ width:100%; height:100%; object-fit:cover; display:block; 
      transition: transform .28s ease;
      transform-origin: center center;
      will-change: transform;
    }

    .item:hover img,
    .item:focus-visible img{   /* 키보드 포커스도 동일 효과 */
      transform: scale(1.08);  /* 1.05~1.12 사이로 취향 조절 */
    }

    /* 라이트박스 */
    .lightbox{
      position:fixed; inset:0; background:var(--overlay-bg);
      display:none; align-items:center; justify-content:center; padding:24px; z-index:2000;
    }
    .lightbox.open{ display:flex; }
    .lightbox__inner{ position:relative; max-width:95vw; max-height:95vh; }
    .lightbox__img{ max-width:95vw; max-height:95vh; border-radius:8px; box-shadow:0 20px 60px rgba(0,0,0,.5); display:block; }
    .lightbox__close{
      position:absolute; top:-14px; right:-14px; width:38px; height:38px; border-radius:999px;
      background:var(--close-bg); color:#fff; border:2px solid #fff;
      display:flex; align-items:center; justify-content:center; font-size:18px; cursor:pointer;
    }
    .lightbox__close:focus-visible{ outline:3px dashed #fff; outline-offset:2px; }

    @media (max-width:520px){ :root{ --cols:2; } } /* 모바일 2열(선택) */
  </style>
</head>
<body>
  <div class="ztmy-menu-container" id="draggable-menu">
    <div class="menu-title">Menu</div>
    <ul class="menu-list">
      <li><a href="index.html">TOP</a></li>
      <li><a href="profile.html">PROFILE</a></li>
      <li><a href="blog1.html">BLOG</a></li>
      <li><a href="projects.html">PROJECTS</a></li>
      <li><a href="photo1.html">PHOTO</a></li>
    </ul>
  </div>

  <div class="content">
    <h1>PHOTOS</h1>
    <div id="gallery" class="gallery" aria-live="polite"></div>
  </div>

  <!-- 라이트박스 -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="원본 이미지 보기">
    <div class="lightbox__inner">
      <img class="lightbox__img" id="lightboxImg" alt="" />
      <button class="lightbox__close" id="lightboxClose" aria-label="닫기(ESC)">✕</button>
    </div>
  </div>

<script>
  /* 드래그 가능한 메뉴 */
  const menu = document.getElementById('draggable-menu');
  let isDragging=false, initialX, initialY, offsetX, offsetY;
  menu.addEventListener('mousedown', e => { isDragging=true; initialX=e.clientX; initialY=e.clientY; offsetX=menu.offsetLeft; offsetY=menu.offsetTop; menu.style.cursor='grabbing'; e.preventDefault(); });
  document.addEventListener('mousemove', e => { if(!isDragging) return; const dx=e.clientX-initialX, dy=e.clientY-initialY; menu.style.left=`${offsetX+dx}px`; menu.style.top=`${offsetY+dy}px`; });
  document.addEventListener('mouseup', () => { isDragging=false; menu.style.cursor='grab'; });

  /* -------------------------------
     사진 목록(관리자만 코드로 편집)
     오래된 → 최신 순으로 추가하세요.
     예: a(오래된)… g(최신)
  -------------------------------- */
  const photos = [
    { src: '/images/100_1786 Copy.jpg', alt: 'a' },
    { src: '/images/100_1792 Copy.jpg', alt: 'b' },
    { src: '/images/100_1798 Copy.jpg', alt: 'c' },
    { src: '/images/100_1804 Copy.jpg', alt: 'd' },
    { src: '/images/100_1839 Copy.jpg', alt: 'e' }
    // 예시 경로들: 자신의 이미지 경로로 교체하세요.
    // { src: 'images/a.jpg', alt: 'a' },
    // { src: 'images/b.jpg', alt: 'b' },
    // { src: 'images/c.jpg', alt: 'c' },
    // { src: 'images/d.jpg', alt: 'd' },
    // { src: 'images/e.jpg', alt: 'e' },
    // { src: 'images/f.jpg', alt: 'f' },
    // { src: 'images/g.jpg', alt: 'g' },
  ];

  const gallery = document.getElementById('gallery');
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const lightboxClose = document.getElementById('lightboxClose');

  // 렌더: (0,0,a) → (0,b,a) → (c,b,a) → (0,0,d // c,b,a) → …
  function render(){
    gallery.innerHTML = '';
    const n = photos.length;
    if (n === 0) return;

    let firstRowSize = n % 3 === 0 ? 3 : n % 3; // 최상단 행 아이템 수
    let remaining = n;
    let cursor = n - 1; // 최신부터 채우기

    while (remaining > 0) {
      const size = (cursor === n - 1) ? firstRowSize : 3; // 첫 행만 부분 채움
      for (let k = 0; k < 3 - size; k++) {
        const spacer = document.createElement('div');
        spacer.className = 'cell spacer';
        spacer.setAttribute('aria-hidden', 'true');
        gallery.appendChild(spacer);
      }
      for (let j = 0; j < size; j++) {
        const p = photos[cursor - j];
        const a = document.createElement('a');
        a.className = 'cell item';
        a.href = p.src;
        a.setAttribute('aria-label', '원본 보기');
        const img = document.createElement('img');
        img.src = p.src; img.alt = p.alt || '';
        a.appendChild(img);
        a.addEventListener('click', (e) => { e.preventDefault(); openLightbox(p.src, p.alt); });
        gallery.appendChild(a);
      }
      cursor -= size;
      remaining -= size;
    }
  }

  // 라이트박스
  function openLightbox(src, alt='원본 이미지'){
    lightboxImg.src = src; lightboxImg.alt = alt || '';
    lightbox.classList.add('open'); document.body.style.overflow='hidden';
  }
  function closeLightbox(){
    lightbox.classList.remove('open'); document.body.style.overflow='';
  }
  lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
  lightboxClose.addEventListener('click', closeLightbox);
  window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeLightbox(); });

  // 초기 렌더
  render();
</script>
</body>
</html>
