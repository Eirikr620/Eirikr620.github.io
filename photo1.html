<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PHOTO | Jonghyeok Hong</title>
  <style>
    @font-face {
      font-family: 'JF-Dot-Shinonome14';
      src: url('JF-Dot-Shinonome14.ttf') format('truetype');
      font-weight: normal; 
      font-style: normal;
    }

    :root{
      --cols: 3;
      --gap: 0px;               /* 썸네일 사이 간격(붙임 배치면 0) */
      --overlay-bg: rgba(0,0,0,.86);
      --close-bg: rgba(0,0,0,.6);

      --grid: 28px;                 /* ▶ 격자 간격: 여기만 바꾸면 간격 조절 */
      --grid-major-step: 4;         /* 굵은 선: 몇 칸마다 한 번 */
      --grid-line: rgba(255,255,255,.12);  /* 얇은 선 색 */
      --grid-major: rgba(255,255,255,.22); /* 굵은 선 색 */
      --w98-ctrl: 23px;   /* 버튼 한 변 */
      --ico-scale: 0.9;   /* 아이콘 확대 배율 */   
    }

    body{
      margin:0; 
      font-family:'JF-Dot-Shinonome14', monospace;
      min-height:100vh; 
      background:#2e2747; 
      position:relative;
      overflow: hidden;

      /*Grid Background*/
      background-image:
        /* Thin line */
        linear-gradient(to right, var(--grid-line) 1px, transparent 1px),
        linear-gradient(to bottom, var(--grid-line) 1px, transparent 1px),
        /* Thick line */
        linear-gradient(to right, var(--grid-major) 1px, transparent 1px),
        linear-gradient(to bottom, var(--grid-major) 1px, transparent 1px);
      background-size:
        var(--grid) var(--grid),
        var(--grid) var(--grid),
        calc(var(--grid) * var(--grid-major-step)) calc(var(--grid) * var(--grid-major-step)),
        calc(var(--grid) * var(--grid-major-step)) calc(var(--grid) * var(--grid-major-step));
      background-position: top left; 
    }

    /* 드래그 가능한 메뉴 (그대로 유지) */
    .menu-container{
      position: absolute; 
      top: 0px; 
      left: 80px; 
      width: 170px; 
      padding: 0px 0px 0px 0px;
      background:#f0f0f0; 
      border: 1.5px solid #d9c3ff; 
      box-shadow: 2px 2px 0 #12121254;
      cursor:grab; 
      z-index:1000;
    }

    .win98__titlebar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 40px;
      padding: 0 6px;
      color: #fff;
      background: #695de6;
      user-select: none;
      cursor: grab;
    }

    .win98__body {
      margin: 0px;
      background: #d9c3ff;
      border: 2px solid #655fe8; /* 안쪽 음각 */
      padding: 10px;
      max-height: var(--body-h, 50vh);
      overflow: auto;
    }

    .win98__controls{ display:inline-flex; gap:4px; }

    .btn-98{
      width: var(--w98-ctrl);
      height: var(--w98-ctrl);
      position: relative;
      display:flex; align-items:center; justify-content:center;
      background:#d4b6fe;
      border:3px solid;
      border-color:#c1acf2 #7b67c8 #8571d5 #ebd0fe;
      cursor:pointer; overflow:visible;
    }
        
    .btn-98:hover{ filter:brightness(.95); }

    .btn-98:active{ border-color:#8571d5 #ebd0fe #c1acf2 #7b67c8; }

    .btn-98 .ico{
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%) scale(var(--ico-scale));
      width:100%; height:100%;
      pointer-events:none; shape-rendering:crispEdges;
    }    

    .menu-title{
      font-size:1.5em; 
      font-weight:bold; 
      padding-bottom:0px; 
      /*border-bottom:2px solid #000; */
      margin-bottom:0px;
      padding: 0 6px
    }

    .menu-list{
      list-style-type: none; 
      margin: 0; 
      padding: 0;
    }
    
    .menu-list li a{
      display:block; 
      padding:5px 0; 
      text-decoration:none; 
      color:#000;
      font-size: 1em;
      transition: color 0.7s;
    }

    .menu-list li a:hover{
      color: #9a68f6;
    }

    .content{
      padding:20px; 
      max-width:800px; 
      margin: 0px auto;
    }

    h1{margin:10px 0 14px;}

    /* === 갤러리: 3열, 셀 단위 렌더 === */
    .gallery{
      display:grid;
      grid-template-columns: repeat(var(--cols), 1fr);
      gap: var(--gap);
    }
    .cell{ position:relative; aspect-ratio:1/1; overflow:hidden; }
    .spacer{ visibility:hidden; pointer-events:none; }
    .item{ display:block; cursor:pointer; background:#e5e7eb; }
    .item img{ width:100%; height:100%; object-fit:cover; display:block;
      transition: transform .28s ease;
      transform-origin: center center;
      will-change: transform;
    }

    .item:hover img,
    .item:focus-visible img{   /* 키보드 포커스도 동일 효과 */
      transform: scale(1.08);  /* 1.05~1.12 사이로 취향 조절 */
    }

    /* 라이트박스 */
    .lightbox{
      position:fixed; inset:0; background:var(--overlay-bg);
      display:none; align-items:center; justify-content:center; padding:24px; z-index:2000;
    }
    .lightbox.open{ display:flex; }
    .lightbox__inner{ position:relative; max-width:95vw; max-height:95vh; }
    .lightbox__img{ max-width:95vw; max-height:95vh; border-radius:8px; box-shadow:0 20px 60px rgba(0,0,0,.5); display:block; }
    .lightbox__close{
      position:absolute; top:-14px; right:-14px; width:38px; height:38px; border-radius:999px;
      background:var(--close-bg); color:#fff; border:2px solid #fff;
      display:flex; align-items:center; justify-content:center; font-size:18px; cursor:pointer;
    }
    .lightbox__close:focus-visible{ outline:3px dashed #fff; outline-offset:2px; }

    @media (max-width:520px){ :root{ --cols:2; } } /* 모바일 2열(선택) */
  
    .content-window{
      position: relative;                /* 문서 흐름 안에서 배치 */
      max-width: 800px;                  /* 기존 컨텐츠 폭 유지 */
      margin: 120px auto 40px;           /* 가운데 정렬 + 위 여백 */
      background-color: #f0f0f0;         /* 메뉴 컨테이너 배경과 동일 */
      border: 1.5px solid #d9c3ff;       /* 같은 연보라 테두리 */
      box-shadow: 2px 2px 0 #12121254;   /* 같은 그림자 */
    }

    /* (선택) 컨텐츠 본문 안쪽 간격이 더 필요하면 여기서 조절 */
    .content-window .win98__body{
      padding: 14px; /* 메뉴 기본 10px보다 조금 넉넉하게 */
    }

    .view-more-container {
      text-align: center;
    }

    @keyframes pop-in {
      from { opacity: 0; transform: translateY(6px) scale(.98); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    } 
  
  </style>
</head>

<body>
  <div class="menu-container" id="draggable-menu">
    <div class="win98__titlebar" id="retroBar">
      <div class="menu-title">Menu</div>

      <div class="win98__controls">
        <button class="btn-98" id="menuMin" title="Minimize"
                aria-label="Minimize" aria-controls="menuBody" aria-expanded="true">
          <svg class="ico" viewBox="0 0 10 10" aria-hidden="true">
            <rect x="1" y="7" width="8" height="1.6" fill="#5b3d84"/>
          </svg>
        </button>
      </div>
    </div>
    
    <div class="win98__body" id="menuBody">
      <ul class="menu-list">
        <li><a href="index.html">TOP</a></li>
        <li><a href="profile.html">PROFILE</a></li>
        <li><a href="blog1.html">BLOG</a></li>
        <li><a href="projects.html">PROJECTS</a></li>
      </ul>
    </div>
  </div>

  <section class="win98" style="--body-h: 60vh">
    <div class="content-window" id="photoWin">
      <div class="win98__titlebar">
        <div class="menu-title">PHOTO</div>

        <div class="win98__controls">
          <button class="btn-98" id="photoMin" title="Minimize"
                  aria-label="Minimize" aria-controls="photoBody" aria-expanded="true">
            <svg class="ico" viewBox="0 0 10 10" aria-hidden="true">
              <rect x="1" y="7" width="8" height="1.6" fill="#5b3d84"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="win98__body" id="photoBody">
        <div id="gallery" class="gallery" aria-live="polite"></div>
      </div>
    </div>
  </section>

  <!-- 라이트박스 -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="원본 이미지 보기">
    <div class="lightbox__inner">
      <img class="lightbox__img" id="lightboxImg" alt="" />
      <button class="lightbox__close" id="lightboxClose" aria-label="닫기(ESC)">✕</button>
    </div>
  </div>

<script>
  /* 드래그 가능한 메뉴 */
  const menu = document.getElementById('draggable-menu');
  let isDragging=false; 
  let initialX, initialY, offsetX, offsetY;

  menu.addEventListener('mousedown', e => { 
    isDragging=true; 
    initialX=e.clientX; 
    initialY=e.clientY; 
    offsetX=menu.offsetLeft; 
    offsetY=menu.offsetTop; 
    menu.style.cursor='grabbing'; 
    e.preventDefault(); 
  });

  document.addEventListener('mousemove', e => { 
    if(!isDragging) return; 
    const dx=e.clientX-initialX; 
    const dy=e.clientY-initialY; 
    
    menu.style.left=`${offsetX+dx}px`; 
    menu.style.top=`${offsetY+dy}px`; 
  });

  document.addEventListener('mouseup', () => {
    isDragging=false; 
    menu.style.cursor='grab'; 
  });

  /* -------------------------------
     사진 목록(관리자만 코드로 편집)
     오래된 → 최신 순으로 추가하세요.
     예: a(오래된)… g(최신)
  -------------------------------- */
  const photos = [
    { src: '/images/100_1786 Copy.JPG', alt: 'a' },
    { src: '/images/100_1792 Copy.JPG', alt: 'b' },
    { src: '/images/100_1798 Copy.JPG', alt: 'c' },
    { src: '/images/100_1804 Copy.JPG', alt: 'd' },
    { src: '/images/100_1839 Copy.JPG', alt: 'e' }
    // 예시 경로들: 자신의 이미지 경로로 교체하세요.
    // { src: 'images/a.jpg', alt: 'a' },
    // { src: 'images/b.jpg', alt: 'b' },
    // { src: 'images/c.jpg', alt: 'c' },
    // { src: 'images/d.jpg', alt: 'd' },
    // { src: 'images/e.jpg', alt: 'e' },
    // { src: 'images/f.jpg', alt: 'f' },
    // { src: 'images/g.jpg', alt: 'g' },
  ];

  const gallery = document.getElementById('gallery');
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const lightboxClose = document.getElementById('lightboxClose');

  // 렌더: (0,0,a) → (0,b,a) → (c,b,a) → (0,0,d // c,b,a) → …
  function render(){
    gallery.innerHTML = '';
    const n = photos.length;
    if (n === 0) return;

    let firstRowSize = n % 3 === 0 ? 3 : n % 3; // 최상단 행 아이템 수
    let remaining = n;
    let cursor = n - 1; // 최신부터 채우기

    while (remaining > 0) {
      const size = (cursor === n - 1) ? firstRowSize : 3; // 첫 행만 부분 채움
      for (let k = 0; k < 3 - size; k++) {
        const spacer = document.createElement('div');
        spacer.className = 'cell spacer';
        spacer.setAttribute('aria-hidden', 'true');
        gallery.appendChild(spacer);
      }
      for (let j = 0; j < size; j++) {
        const p = photos[cursor - j];
        const a = document.createElement('a');
        a.className = 'cell item';
        a.href = p.src;
        a.setAttribute('aria-label', '원본 보기');
        const img = document.createElement('img');
        img.src = p.src; img.alt = p.alt || '';
        a.appendChild(img);
        a.addEventListener('click', (e) => { e.preventDefault(); openLightbox(p.src, p.alt); });
        gallery.appendChild(a);
      }
      cursor -= size;
      remaining -= size;
    }
  }

  // 라이트박스
  function openLightbox(src, alt='원본 이미지'){
    lightboxImg.src = src; lightboxImg.alt = alt || '';
    lightbox.classList.add('open'); document.body.style.overflow='hidden';
  }
  function closeLightbox(){
    lightbox.classList.remove('open'); document.body.style.overflow='';
  }
  lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
  lightboxClose.addEventListener('click', closeLightbox);
  window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeLightbox(); });

  (function(){
    const btn  = document.getElementById('photoMin');
    const body = document.getElementById('photoBody');
    if (!btn || !body) return;

  btn.addEventListener('click', () => {
    const collapsed = body.style.display !== 'none' ? true : false;
    body.style.display = collapsed ? 'none' : '';
    btn.setAttribute('aria-expanded', String(!collapsed));
  });
  })();

  (function(){
    const btn  = document.getElementById('menuMin');
    const body = document.getElementById('menuBody');
    if (!btn || !body) return;

  btn.addEventListener('click', (e) => {
    e.stopPropagation(); // 드래그 시작 등과 충돌 방지
    const willCollapse = body.style.display !== 'none';
    body.style.display = willCollapse ? 'none' : '';
    btn.setAttribute('aria-expanded', String(!willCollapse));
  });
  })();    

  // 초기 렌더
  render();
</script>
</body>
</html>
